;@지하감옥

@지하감옥커맨드가부
#FUNCTION
SIF FLAG:USERCOM시작 == 0
	RETURNF 0
IF FLAG:감방남은일수 > 0&&MAIN_MAP == 12
	RETURNF 1
ELSE
	RETURNF 0
ENDIF

@지하감옥추방
FOR LOCAL,1,CHARANUM
	IF LOCAL < RANDOM_CHARANUM
		IF CFLAG:LOCAL:현재위치 == 1201||CFLAG:LOCAL:현재위치 == 1202||CFLAG:LOCAL:현재위치 == 1203||CFLAG:LOCAL:현재위치 == 1204||CFLAG:LOCAL:현재위치 == 1205||CFLAG:LOCAL:현재위치 == 1206||CFLAG:LOCAL:현재위치 == 1207||CFLAG:LOCAL:현재위치 == 1208||CFLAG:LOCAL:현재위치 == 1209||CFLAG:LOCAL:현재위치 == 1210||CFLAG:LOCAL:현재위치 == 1211||CFLAG:LOCAL:현재위치 == 1212||CFLAG:LOCAL:현재위치 == 1213
			CFLAG:LOCAL:현재위치 = 99
		ENDIF
	ENDIF
NEXT

@투옥
IF FLAG:감방남은일수
	THROW 투옥 함수가 실행되었지만 이미 감옥에 있습니다
ENDIF
이전집 = MAIN_MAP
이전위치 = CFLAG:MASTER:초기위치
MAIN_MAP = 12
CALLFORM ROOMSETTING_{MAIN_MAP}
CALLFORM DEFAULT_OWNER_{MAIN_MAP}
CFLAG:MASTER:현재위치 = 1201
CFLAG:MASTER:초기위치 = 1201
FLAG:감방남은일수 += 180
FOR LOCAL,1,CHARANUM
	CALL CHARA_SLEEP, LOCAL, 0
NEXT

@석방
MAIN_MAP = 이전집
CFLAG:MASTER:초기위치 = 이전위치
CALLFORM ROOMSETTING_{MAIN_MAP}
CALLFORM DEFAULT_OWNER_{MAIN_MAP}
CFLAG:MASTER:현재위치 = CFLAG:MASTER:초기위치 
FLAG:감방남은일수 = 0
FOR LOCAL,1,CHARANUM
	CALL CHARA_SLEEP, LOCAL, 0
NEXT


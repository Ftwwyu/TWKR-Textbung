@RD_MAKE


CALL RD_ENAMY(0,0,"적수")
LOCAL = RESULT
CALL RD_ENAMY(0,0,"보스수")
LOCAL:1 = RESULT
D_OBJECT = RAND:3
;0.회수: 던전 안에서 특정 물체와 상호작용후 안전하게 출구로 탈출 
;1.보스 처치: 특정물체와 상호작용해서 보스와 전투후 승리
;2.정찰: 특정물체와 상호작용하고 올 것(튕겨나와도 OK)
;3.회수 및 보스처치: 보스를 처치하고 물건을 찾아올것
SELECTCASE D_OBJECT
    CASE 0
        D_DIFFCULT += 1
    CASE 1
        D_BOSS = 10000 + RAND:(LOCAL:1)
        D_DIFFCULT += 2
    CASE 2
    CASE 3
        D_BOSS = 10000 + RAND:(LOCAL:1)
        D_DIFFCULT += 3
ENDSELECT
RD_TYPE = RAND:2
;0.결계: 불안정해지면 공간왜곡
;1.동굴: 적만 나옴
SELECTCASE RD_TYPE
    CASE 0

    CASE 1
        TT_DISTORTION_DISABLE = 1
ENDSELECT
D_MAP_SIGHT = 3 + RAND:8
D_MAP_STABLE = 10 + RAND:90
D_ENAMY = RAND:LOCAL
CALL RD_ENAMY(D_ENAMY,3)
D_DIFFCULT += RESULT


@RDSETTING_APPLY
TT_STABLE = D_MAP_STABLE
TT_SIGHT = D_MAP_SIGHT

@RD_ENAMY(ARG,ARG:1 = -1,ARGS = "")
IF ARGS == ""
    SELECTCASE ARG
        CASE 0
            SELECTCASE ARG:1
                CASE -1
                    ;적 정보
                    TT_ENAMY = 0
                    PRINTFORMW 유령이 나타났다!
                    CALLNAME:TARGET = 유령
                    NAME:TARGET = 유령
                    BASE:TARGET:체력 = 2000
                    ABL:TARGET:전투능력 = 5
                    ABL:TARGET:레벨 = 20
                    CFLAG:TARGET:힘 = 10
                    CFLAG:TARGET:지성 = 35
                    CFLAG:TARGET:속도 = 10
                    CFLAG:TARGET:인내 = 15
                    CFLAG:TARGET:운 = 30
                    CFLAG:물리내성 = 500000
                    CFLAG:정신내성 = -500
                    TALENT:TARGET:정화 = 1
                    TALENT:TARGET:탄막소사 = 1
                    TALENT:TARGET:전투스타일 = 1
                CASE 0
                    ;적 애프터-타겟 패배
                    PRINTFORMW 유령을 쓰러뜨렸다!
                    RETURN RAND:10
                CASE 1
                    ;무승부
                    PRINTFORMW 유령이 도망쳤다!
                    RETURN RAND:25
                CASE 2
                    ;마스터 패배
                    PRINTFORMW 유령한테 당했다!
                    RETURN RAND:100 + 1
                CASE 3
                    ;난이도
                    RETURN 2
            ENDSELECT
        CASE 1
            SELECTCASE ARG:1
                CASE -1
                    ;적 정보
                    TT_ENAMY = 0
                    PRINTFORMW 야생의 요정이 나타났다!
                    CALLNAME:TARGET = 요정
                    NAME:TARGET = 요정
                    BASE:TARGET:체력 = 1000
                    ABL:TARGET:전투능력 = 3
                    ABL:TARGET:레벨 = 10
                    CFLAG:TARGET:힘 = 5
                    CFLAG:TARGET:지성 = 5
                    CFLAG:TARGET:속도 = 15
                    CFLAG:TARGET:인내 = 10
                    CFLAG:TARGET:운 = 15
                    CFLAG:물리내성 = 5 * ABL:레벨
                    CFLAG:화염내성 = 10 * ABL:레벨
                    CFLAG:빙결내성 = 5 * ABL:레벨
                    CFLAG:전격내성 = 5 * ABL:레벨
                    CFLAG:질풍내성 = -10 * ABL:레벨
                    CFLAG:마력내성 = 5 * ABL:레벨
                    CFLAG:수격내성 = 5 * ABL:레벨
                    CFLAG:정신내성 = -5 * ABL:레벨
                    TALENT:TARGET:정화 = 1
                    TALENT:TARGET:탄막소사 = 1
                    TALENT:TARGET:전투스타일 = 1
                CASE 0
                    ;적 애프터-타겟 패배
                    PRINTFORMW 요정을 쓰러뜨렸다!
                    RETURN RAND:10
                CASE 1
                    ;무승부
                    PRINTFORMW 요정이 도망쳤다!
                    RETURN RAND:25
                CASE 2
                    ;마스터 패배
                    PRINTFORMW 요정한테 당했다!
                    RETURN RAND:100 + 1
                CASE 3
                    ;난이도
                    RETURN 1
            ENDSELECT
        CASE 10000
            SELECTCASE ARG:1
                CASE -1
                    ;적 정보
                    TT_ENAMY = 0
                    PRINTFORMW 해바라기 요정이 나타났다!
                    CALLNAME:TARGET = 해바라기요정
                    NAME:TARGET = 해바라기요정
                    BASE:TARGET:체력 = 1500
                    ABL:TARGET:전투능력 = 5
                    ABL:TARGET:레벨 = 25
                    CFLAG:TARGET:힘 = 20
                    CFLAG:TARGET:지성 = 15
                    CFLAG:TARGET:속도 = 30
                    CFLAG:TARGET:인내 = 25
                    CFLAG:TARGET:운 = 35
                    CFLAG:물리내성 = 5 * ABL:레벨
                    CFLAG:화염내성 = 10 * ABL:레벨
                    CFLAG:빙결내성 = 5 * ABL:레벨
                    CFLAG:전격내성 = 5 * ABL:레벨
                    CFLAG:질풍내성 = -10 * ABL:레벨
                    CFLAG:마력내성 = 5 * ABL:레벨
                    CFLAG:수격내성 = 5 * ABL:레벨
                    CFLAG:정신내성 = -5 * ABL:레벨
                    TALENT:TARGET:정화 = 1
                    TALENT:TARGET:탄막소사 = 1
                    TALENT:TARGET:불을다루는정도의능력 = 1
                    TALENT:TARGET:전투스타일 = 1
                CASE 0
                    ;적 애프터-타겟 패배
                    PRINTFORMW 요정을 쓰러뜨렸다!
                    RETURN RAND:10
                CASE 1
                    ;무승부
                    PRINTFORMW 요정이 도망쳤다!
                    RETURN RAND:25
                CASE 2
                    ;마스터 패배
                    PRINTFORMW 요정한테 당했다!
                    RETURN RAND:100 + 1
                CASE 3
                    ;난이도
                    RETURN 1
            ENDSELECT
    ENDSELECT
ELSEIF ARGS == "적수"
    RETURN 2
ELSEIF ARGS == "보스수"
    RETURN 1
ENDIF
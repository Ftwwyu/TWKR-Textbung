
@TSC_26
PRINTFORML 결계의 일그러짐이 느껴진다...
PRINTFORML 결계의 틈새 속으로 들어가볼까?
CALL ASK_YN
IF RESULT
	RETURN
ELSE
	CALL 결계탐색
	TIME += 5
ENDIF
RETURN 1


@TSC_NAME26
#DIMS DYNAMIC 커맨드이름
커맨드이름 = 결계의틈새 속으로
RESULTS = %커맨드이름%

@TSC_ABLE26

IF !GROUPMATCH(CFLAG:MASTER:현재위치,GET_MAP_REPLACEMENT(506),GET_MAP_REPLACEMENT(25),GET_MAP_REPLACEMENT(634))
    RETURN 0
ENDIF
;기력 0
SIF BASE:MASTER:기력 <= 0
	RETURN 0
SIF CFLAG:우후후 == 2
	RETURN 0
;정지 중에는 불가
SIF FLAG:70
	RETURN 0
RETURN 2

@결계탐색초기화
VARSET TT_맵
VARSET TT_NOW
VARSET TT_SIGHT
VARSET TT_STABLE
VARSET TT_OBJECT
VARSET TT_OBJECT_TYPE
VARSET TT_GETOUT
VARSET TT_NUM
VARSET TT_SPAWN
VARSET TT_HP_DOWN
VARSET TT_ENAMY_DISABLE
VARSET TT_DISTORTION_DISABLE

@결계탐색(ARG = 0)
#DIM DYNAMIC TEMP_LINE
;세로, 가로
CALL 결계탐색초기화
TT_TIMEOUT = 10000
CALL 결계_맵생성(ARG)
IF TT_SPAWN
	TT_NOW:0 = TT_SPAWN:0
	TT_NOW:1 = TT_SPAWN:1
ENDIF
;---------------------
$결계맵루프
TEMP_LINE = LINECOUNT
DRAWLINE
ALIGNMENT CENTER
CALL 결계맵표시
ALIGNMENT LEFT
DRAWLINE
PRINT 　　
PRINTBUTTON "[↑]",1
PRINT 　　　　
CALLFORM TT_MAP_{TT_NUM}("플레이버텍스트",(TT_맵:(TT_NOW:0):(TT_NOW:1)))
PRINTL
PRINTBUTTON "[←]",2
PRINT 　　
PRINTBUTTON "[→]",3
PRINT 　　
PRINTBUTTON "[상호작용]",5
PRINTFORM 　　　　　지역 안정도 {TT_TIMEOUT/100}.{TT_TIMEOUT%100}％
IF TT_TIMEOUT < 9500
	PRINTFORM (적 존재 감지됨) 
ENDIF
IF TT_TIMEOUT < 8999
	PRINTFORM (공간왜곡 발생중) 
ENDIF
PRINTL
PRINT 　　
PRINTBUTTON "[↓]",4
PRINTL
INPUT
IF GROUPMATCH(RESULT,1,2,3,4)
	SELECTCASE RESULT
		CASE 1
			IF TT_NOW:0 == 0 ;세로칸 0번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF GETBIT(TT_OBJECT_TYPE:(TT_맵:(TT_NOW:0 - 1):(TT_NOW:1)),0)
			ELSE
				TT_TIMEOUT -= TT_STABLEDOWN()
				TT_NOW:0 --
				CALL 결계일그러짐
			ENDIF
		CASE 2
			IF TT_NOW:1 == 0 ;가로칸 0번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF GETBIT(TT_OBJECT_TYPE:(TT_맵:(TT_NOW:0):(TT_NOW:1 - 1)),0)
			ELSE
				TT_TIMEOUT -= TT_STABLEDOWN()
				TT_NOW:1 --
				CALL 결계일그러짐
			ENDIF
		CASE 3
			IF TT_NOW:1 == TT_맵MAX-1 ;가로칸 끝번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF GETBIT(TT_OBJECT_TYPE:(TT_맵:(TT_NOW:0):(TT_NOW:1 + 1)),0)
			ELSE
				TT_TIMEOUT -= TT_STABLEDOWN()
				TT_NOW:1 ++
				CALL 결계일그러짐
			ENDIF
		CASE 4
			IF TT_NOW:0 == TT_맵MAX-1 ;세로칸 끝번이면
				;여기에 걸리면 저 밑으로 가게 된다, 아마도
			ELSEIF GETBIT(TT_OBJECT_TYPE:(TT_맵:(TT_NOW:0 + 1):(TT_NOW:1)),0)
			ELSE
				TT_TIMEOUT -= TT_STABLEDOWN()
				TT_NOW:0 ++
				CALL 결계일그러짐
			ENDIF
	ENDSELECT
ELSEIF RESULT == 5
	;상호작용
	CALLFORM TT_MAP_{TT_NUM}("상호작용",TT_맵:(TT_NOW:0):(TT_NOW:1))
	IF RESULT != -1
		TT_TIMEOUT -= TT_STABLEDOWN()
	ENDIF
	CALL 결계일그러짐
ELSE
	CLEARLINE LINECOUNT - TEMP_LINE
	GOTO 결계맵루프
ENDIF
IF TT_GETOUT
	DOWNBASE:MASTER:기력 = MAXBASE:MASTER:기력*((10000 - TT_TIMEOUT))/10000
	DOWNBASE:MASTER:체력 = TT_HP_DOWN
	TIME += (10000-TT_TIMEOUT)/100
	RETURN
ENDIF
IF TT_TIMEOUT <= 0
	IF TT_DISTORTION_DISABLE
		PRINTFORMW 시간을 너무 지체해 동굴이 붕괴해버렸다!
		PRINTFORMW 다행스럽게도 동굴 밖 까지 도망칠 수 있었다...
	ELSE
		PRINTFORMW 불안정해진 결계에서 튕겨져 나와버렸다!
	ENDIF
	DOWNBASE:MASTER:기력 = MAXBASE:MASTER:기력*((10000 - TT_TIMEOUT))/10000
	DOWNBASE:MASTER:체력 = TT_HP_DOWN
	TIME += (10000-TT_TIMEOUT)/100
	RETURN
ENDIF
CLEARLINE LINECOUNT - TEMP_LINE
GOTO 결계맵루프

@결계일그러짐
#DIM DYNAMIC 왜곡보너스
IF TT_GETOUT
	RETURN
ENDIF
SELECTCASE TT_TIMEOUT/100
	CASE IS < 5
		왜곡보너스 = -13
	CASE IS < 10
		왜곡보너스 = -8
	CASE IS < 20
		왜곡보너스 = -4
	CASE IS < 30
		왜곡보너스 = -2
	CASE IS < 40
		왜곡보너스 = -1
	CASE IS < 50
		왜곡보너스 = 0
	CASE IS < 60
		왜곡보너스 = 1
	CASE IS < 70
		왜곡보너스 = 2
	CASE IS < 80
		왜곡보너스 = 4
	CASE IS < 90
		왜곡보너스 = 6
	CASEELSE
		왜곡보너스 = 8
ENDSELECT
IF TT_TIMEOUT < 8999 && !TT_DISTORTION_DISABLE
	;공간왜곡 시작
	LOCAL:0 = RAND:TT_맵MAX
	LOCAL:1 = RAND:TT_맵MAX
	IF TT_NOW:0 == LOCAL && TT_NOW:1 == LOCAL:1
		;실행없음
	ELSE
		IF TT_맵:(LOCAL:0):(LOCAL:1) == 1
			;역시 실행없음
		ELSE
			IF !명중판정(15+왜곡보너스)
				IF RAND:3 == 0
					TT_맵:(LOCAL:0):(LOCAL:1) = 3
				ELSE
					TT_맵:(LOCAL:0):(LOCAL:1) = 0
				ENDIF
			ENDIF
		ENDIF
	ENDIF
ENDIF
IF (TT_TIMEOUT < 9500 || D_FORCE_ENAMY) && !TT_ENAMY_DISABLE
	;요괴 등장
	IF !명중판정(85+왜곡보너스)
		CALL 결계_적등장
	ENDIF
ENDIF

@결계_적등장
CALL TT_적기본세팅()
CALLFORM TT_MAP_{TT_NUM}("적")
CALL 뉴탄막전투(MASTER,TARGET,1)
CALLFORM TT_MAP_{TT_NUM}("적애프터", TT_ENAMY)
DELCHARA TARGET
TARGET = 0
경험치인터셉트 = 0
후처리인터셉트 = 0

@결계맵표시
FOR LOCAL,0,TT_맵MAX+2
	PRINTFORM ■
NEXT
PRINTL


FOR LOCAL,0,TT_맵MAX
	PRINTFORM ■
	FOR LOCAL:1,0,TT_맵MAX
		IF LOCAL == TT_NOW:0 && LOCAL:1 == TT_NOW:1
			PRINT ＠
		ELSE
			IF TT_맵_UNSEEN(LOCAL,LOCAL:1)
				PRINTFORM %TT_OBJECT:(TT_맵:(LOCAL):(LOCAL:1))%
			ELSE
				PRINTFORM ·
			ENDIF
		ENDIF
	NEXT
	PRINTFORML ■
NEXT

FOR LOCAL,0,TT_맵MAX+2
	PRINTFORM ■
NEXT
PRINTL


@결계_맵생성(ARG = 0)

LOCAL = RAND:5 + 1
IF ARG
	LOCAL = ARG
ENDIF
[IF_DEBUG]
	PRINTFORML 어느맵으로 갈까?
	INPUT
	IF RESULT
		LOCAL = RESULT
	ENDIF
[ENDIF]
TT_NUM = LOCAL
CALLFORM TT_MAP_{TT_NUM}("초기화")


@TT_맵_UNSEEN(ARG,ARG:1)
#FUNCTION
IF ABS(TT_NOW:0-ARG) <= TT_SIGHT && ABS(TT_NOW:1-ARG:1) <= TT_SIGHT
	SIF ABS(TT_NOW:0-ARG) == TT_SIGHT && ABS(TT_NOW:1-ARG:1) == TT_SIGHT
		RETURNF 0
	RETURNF 1
ENDIF
RETURNF 0

@TT_STABLEDOWN()
#FUNCTION
RETURNF MAX(0,MAX(0,RAND:15 + 11) - TT_STABLE)


@TT_적기본세팅()
ADDCHARA RANDOM_CHARANUM
TARGET = CHARANUM -1
CFLAG:TARGET:CSV오버라이드 = 1
EQUIP:TARGET:상반신윗도리2 = 1
EQUIP:TARGET:상반신속옷1 = 1
TEQUIP:TARGET:상반신착의상황 = 1
TEQUIP:TARGET:하반신착의상황 = 1
후처리인터셉트 = 1
경험치인터셉트 = 1


@TT_MAP_1(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
;숨겨진 마을
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 3
		TT_STABLE = 10
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,2,2,0,2,2,2,0,0,0,2,2,0,2,2,2,0,0,0,2,2,0,2,2,2,0,0,0,0,0,2,2,2
		TT_맵:03:0 = 0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0
		TT_맵:04:0 = 0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,5
		TT_맵:05:0 = 0,0,0,2,2,2,2,2,2,3,0,0,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,2,2,0,2,2,2,0,0,3,2,2,0,2,2,2,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 0,0,0,2,0,0,0,0,2,0,0,3,3,3,0,0,0,2,0,0,0,2,0,0,0,0,2,0,0,0,0,3,0,0,0
		TT_맵:10:0 = 0,0,0,2,0,0,3,3,2,0,0,0,2,3,3,3,0,2,0,3,0,2,0,0,0,5,2,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,2,2,2,3,3,2,3,3,0,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,0,0,0,0,3,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,3,0,0,0,0,0,0
		TT_맵:14:0 = 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,2,3,3,3,0,2,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 3,3,3,3,3,3,3,0,0,0,3,3,0,0,0,3,3,3,3,3,3,3,3,0,0,0,2,0,0,0,3,0,0,0,0
		TT_맵:16:0 = 3,3,3,3,0,0,0,0,0,0,3,0,0,0,0,0,0,3,0,0,3,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,0,0,0,0,0,2,0,2,2,2,0,2,0,0,0,0,0,3,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0
		TT_맵:19:0 = 0,0,0,2,2,2,0,2,2,2,0,0,0,0,3,0,3,0,0,3,0,0,0,0,0,3,3,3,0,0,0,3,3,0,0
		TT_맵:20:0 = 0,0,0,2,0,0,0,0,0,2,0,0,0,0,0,0,3,3,0,0,0,0,3,3,3,3,0,3,3,0,3,3,0,0,0
		TT_맵:21:0 = 0,0,0,2,0,5,0,0,0,2,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0
		TT_맵:22:0 = 0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,3,3,3,0,2,2,2,2,2,0,2,2,2,2,2,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,3,2,5,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,3,3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,2,0,0,0,0,3,3,3,3,3,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,2,0,0,5,3,3,0,0,2,0,0,0,0,0,0,2,0,0,0,5,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,2,0,0,3,3,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,3,0,0,2,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,2,0,0,3,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,2,0,0,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,2,0,5,0,0,0,0,0,2,0,0,0,0,0,0,2,0,0,0,0,4,0,0,0,0,2,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
				PRINTFORM 무언가가 올려져 있는 제단
			CASE 5
				PRINTFORM 반짝이는 무언가
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
				;조교전의 제단
				IF !FLAG:조교전
					PRINTFORML 제단 위의 수상쩍은 책을 발견했다...
					PRINTFORML 주우려고 손을 뻗는 찰나, 정체모를 망령이 솟아나 책을 빼앗았다!
					PRINTFORMW 정체 모를 망령은 공격적인 자세를 취했다...
					CALL 조교사의망령
					SELECTCASE 후처리인터셉트승패여부
						CASE 0
							;타겟 패배
							PRINTFORMW 조교사의 망령이 힘을 잃고 흩어져 사라져 갔다...
							PRINTFORMW %마스터는% 그 밑에 떨어진 검은 책을 주워들었다
							PRINTFORMW 낡은 표지에는 희미하게 원 제목이 적혀 있었다
							PRINTL
							PRINTFORML 「동방 조교전」
							PRINTW
							PRINTFORMW %마스터는% 품 속에 조교전을 챙겼다
							FLAG:조교전 = 1
							TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
						CASEELSE
							PRINTFORMW 조교사의 망령은 %마스터를% 경계하는 듯한 자세를 취하더니, 이내 다시 사라졌다
							PRINTFORMW 조교전은 아직 제단 위에 조용히 놓여 있을 뿐이었다	
							TT_TIMEOUT -= 1000
					ENDSELECT
				ELSE
					PRINTFORML 제단 위에는 누군가의 시체가 소중한듯이 낡은 공책을 쥐고 있었다
					PRINTFORML 다 닳아서 제목조차 읽기 힘든 그 책의 이름은...아마도 조교전인 것 같았다
				ENDIF
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 1000
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
		ENDSELECT
	CASE "적"
		TT_ENAMY = 0
		PRINTFORMW 어디선가 희미한 망령이 나타나 길을 가로막았다!
		CALLNAME:TARGET = 희미한 망령
		NAME:TARGET = 희미한망령
		BASE:TARGET:체력 = 800
		ABL:TARGET:전투능력 = RAND:4 + 3
		ABL:TARGET:레벨 = (RAND:20 + 25 + (ABL:MASTER:레벨/8))
		CFLAG:TARGET:힘 = RAND:20 + 25 + (CFLAG:MASTER:힘/8)
		CFLAG:TARGET:지성 = RAND:20 + 18 + (CFLAG:MASTER:지성/8)
		CFLAG:TARGET:속도 = RAND:20 + 25 + (CFLAG:MASTER:속도/8)
		CFLAG:TARGET:인내 = RAND:15 + 35 + (CFLAG:MASTER:인내/6)
		CFLAG:TARGET:운 = RAND:20 + 8 + (CFLAG:MASTER:운/7)
		CFLAG:물리내성 = 15 * ABL:TARGET:레벨
		CFLAG:정신내성 = -5 * ABL:TARGET:레벨
		TALENT:TARGET:정화 = 1
		TALENT:TARGET:탄막소사 = 1
		TALENT:TARGET:전투스타일 = 1
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다...
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 영체는 돌연히 사라졌다
						PRINTFORML 그러나 결계의 불안정화가 한층 더 가속된 것 같다
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW

			CASE 1

		ENDSELECT
ENDSELECT

@TT_MAP_2(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
#DIM DYNAMIC 책선정용
;돈 창고
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 3
		TT_STABLE = 10
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,2,0,0,0,2,0,0,5,0,0,0,0,0,0,0,0,5,0,0,5,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,5,0,0,0,0,0,5,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,5,0,0,0,5,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,2,0,3,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,2,0,0,0,2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,5,0,0,0,5,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,2,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,2,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,2,0,0,0,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		IF !미번역책:0 && !번역된책:0
			FOR LOCAL:2,0,5
				LOCAL = RAND:25 + 5
				LOCAL:1 = RAND:25 + 5
				IF TT_맵:LOCAL:(LOCAL:1) == 0
					TT_맵:LOCAL:(LOCAL:1) = 6
					BREAK
				ENDIF
			NEXT
		ENDIF
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		TT_OBJECT:6 '= "▥"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
		TT_OBJECT_TYPE:6 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORM 반짝이는 무언가
			CASE 6
				PRINTFORM 이상한 글이 적힌 책자
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 1000
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
			CASE 6
				PRINTFORMW 알 수 없는 내용이 적힌 책자를 주웠다!
				책선정용 = RAND:4 + 1
				미번역책:0 = 책선정용
				책선정용 = (RAND:10 + 1) * 100
				미번역책:1 = 책선정용
				책선정용 = RAND:3 + 1
				미번역책:2 = 책선정용
				FOR LOCAL, 0, 11
					책선정용 = RAND:4
					미번역책:4 = 책선정용
					미번역책:4 = 미번역책:4 << 2
				NEXT
				;마지막은 시프트연산 안하기 위해
				책선정용 = RAND:4
				미번역책:4 = 책선정용
				;총 24BIT
				PRINTFORMW 누군가에게 해독을 맡기면 활용할 수 있을지도 모르겠다...아마도 영나암의 그녀라면 가능하지 않을까...
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
		ENDSELECT
	CASE "적"
		TT_ENAMY = 0
		PRINTFORMW 어디선가 희미한 망령이 나타나 길을 가로막았다!
		CALLNAME:TARGET = 희미한 망령
		NAME:TARGET = 희미한망령
		BASE:TARGET:체력 = 800
		ABL:TARGET:전투능력 = RAND:4 + 3
		ABL:TARGET:레벨 = (RAND:20 + 25 + (ABL:MASTER:레벨/8))
		CFLAG:TARGET:힘 = RAND:20 + 25 + (CFLAG:MASTER:힘/8)
		CFLAG:TARGET:지성 = RAND:20 + 18 + (CFLAG:MASTER:지성/8)
		CFLAG:TARGET:속도 = RAND:20 + 25 + (CFLAG:MASTER:속도/8)
		CFLAG:TARGET:인내 = RAND:15 + 35 + (CFLAG:MASTER:인내/6)
		CFLAG:TARGET:운 = RAND:20 + 8 + (CFLAG:MASTER:운/7)
		CFLAG:물리내성 = 15 * ABL:TARGET:레벨
		CFLAG:정신내성 = -5 * ABL:TARGET:레벨
		TALENT:TARGET:정화 = 1
		TALENT:TARGET:탄막소사 = 1
		TALENT:TARGET:전투스타일 = 1
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다...
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 영체는 돌연히 사라졌다
						PRINTFORML 그러나 결계의 불안정화가 한층 더 가속된 것 같다
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW

			CASE 1

		ENDSELECT
ENDSELECT

@TT_MAP_3(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
;바깥세계로의 길
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 3
		TT_STABLE = 10
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 3,3,0,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:10:0 = 3,3,3,3,0,0,3,3,3,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,3,3,0,3,3,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2
		TT_맵:25:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,6
		TT_맵:30:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,5,0,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,0,6
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,6,6
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,6,6,6
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,2,0,0,6,0,6,6,6
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		TT_OBJECT:6 '= "◎"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
		TT_OBJECT_TYPE:6 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORM 반짝이는 무언가
			CASE 6
				PRINTFORM 높디 높은 빌딩과 사람들의 인파가 옅보인다
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 1000
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
			CASE 6
				PRINTFORMW 바깥세계의 모습이 보인다...
				PRINTFORMW 손을 뻗으니 무언가에 빨려 들어가버렸다!
				CALL TT_MAP_10001("초기화")
				TT_NUM = 10001
				TT_TIMEOUT = 10000
				TT_NOW:0 = TT_SPAWN:0
				TT_NOW:1 = TT_SPAWN:1
		ENDSELECT
	CASE "적"
		IF 명중판정(70)
			TT_ENAMY = 0
			PRINTFORMW 어디선가 희미한 망령이 나타나 길을 가로막았다!
			CALLNAME:TARGET = 희미한 망령
			NAME:TARGET = 희미한망령
			BASE:TARGET:체력 = 800
			ABL:TARGET:전투능력 = RAND:4 + 3
			ABL:TARGET:레벨 = (RAND:20 + 25 + (ABL:MASTER:레벨/8))
			CFLAG:TARGET:힘 = RAND:20 + 25 + (CFLAG:MASTER:힘/8)
			CFLAG:TARGET:지성 = RAND:20 + 18 + (CFLAG:MASTER:지성/8)
			CFLAG:TARGET:속도 = RAND:20 + 25 + (CFLAG:MASTER:속도/8)
			CFLAG:TARGET:인내 = RAND:15 + 35 + (CFLAG:MASTER:인내/6)
			CFLAG:TARGET:운 = RAND:20 + 8 + (CFLAG:MASTER:운/7)
			CFLAG:물리내성 = 15 * ABL:TARGET:레벨
			CFLAG:정신내성 = -5 * ABL:TARGET:레벨
			TALENT:TARGET:정화 = 1
			TALENT:TARGET:탄막소사 = 1
			TALENT:TARGET:전투스타일 = 1
		ELSE
			TT_ENAMY = 1
			PRINTFORMW 흐릿한 안개속에서 늙은 검객이 나타나 길을 가로막았다!
			CALLNAME:TARGET = 늙은 검객
			NAME:TARGET = 늙은 검객
			BASE:TARGET:체력 = 2000
			ABL:TARGET:전투능력 = 12
			ABL:TARGET:레벨 = 120
			CFLAG:TARGET:힘 = 155
			CFLAG:TARGET:지성 = 70
			CFLAG:TARGET:속도 = 185
			CFLAG:TARGET:인내 = 100
			CFLAG:TARGET:운 = 90
			CFLAG:물리내성 = 10 * ABL:TARGET:레벨
			CFLAG:화염내성 = 5 * ABL:TARGET:레벨
			CFLAG:빙결내성 = 5 * ABL:TARGET:레벨
			CFLAG:전격내성 = 5 * ABL:TARGET:레벨
			CFLAG:질풍내성 = 5 * ABL:TARGET:레벨
			CFLAG:마력내성 = 5 * ABL:TARGET:레벨
			CFLAG:수격내성 = 5 * ABL:TARGET:레벨
			CFLAG:정신내성 = -5 * ABL:TARGET:레벨
			TALENT:TARGET:정화 = 1
			TALENT:TARGET:전투스타일 = 1
			TALENT:TARGET:검을다루는정도의능력 = 1
			TALENT:TARGET:인부현세참 = 1
			TALENT:TARGET:절복무간 = 1
			TALENT:TARGET:혼백유명구문지총명의법 = 1
			TALENT:TARGET:전생검원심유전참 = 1
			TALENT:TARGET:천신검삼혼칠백 = 1
		ENDIF
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다...
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 영체는 돌연히 사라졌다
						PRINTFORML 그러나 결계의 불안정화가 한층 더 가속된 것 같다
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW

			CASE 1
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 늙은 검객은 이내 안개속으로 사라졌다...
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 늙은 검객은 이내 안개속으로 사라져 갔다...
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 늙은 검객의 형채는 돌연히 사라져갔다
						PRINTFORML 그러나 결계의 불안정화가 한층 더 가속된 것 같다
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW
		ENDSELECT
ENDSELECT



@TT_MAP_4(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
;떨어진 태양의 제단
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 3
		TT_STABLE = 10
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,5,0,0,0,0,0,0,5,0,2,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,5,0,0,0,0,0,5,2,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,2,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,6,0,0,2,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,2,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,2,0,0,0,5,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,2,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,2,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,2,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,2,2,2,2,2,2,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		TT_OBJECT:6 '= "◎"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
		TT_OBJECT_TYPE:6 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORM 반짝이는 무언가
			CASE 6
				IF GETBIT(TR_CROW,0) && !GETBIT(TR_CROW_RECORD,0)
					PRINTFORM 까마귀가 있던 제단
				ELSE
					PRINTFORM 화살에 꿰뚫린 까마귀가 올려져 있는 제단
				ENDIF
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 1000
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
			CASE 6
				IF GETBIT(TR_CROW,0) && !GETBIT(TR_CROW_RECORD,0)
					PRINTFORMW 제단 위엔 부서져버린 까마귀의 잔해만이 남아있다
				ELSE
					IF !FLAG:조교전
						PRINTFORMW 까마귀 시체를 건드려 보았으나 아무런 일도 일어나지 않는다
					ELSE
						PRINTFORML 까마귀의 시체를 건드니 순식간에 붕괴해 먼지가 되었다
						PRINTFORML 그 속에서 형언할 수 없는 힘이 새어나와 조교전의 속으로 흡수되어 간다...
						PRINTFORMW [첫번째 까마귀]를 얻었다
						SETBIT TR_CROW, 0
					ENDIF
				ENDIF
		ENDSELECT
	CASE "적"
		;LOCAL = RAND:100
		;SELECTCASE LOCAL
		;	CASE 0 TO 70
				TT_ENAMY = 0
				PRINTFORMW 어디선가 희미한 망령이 나타나 길을 가로막았다!
				CALLNAME:TARGET = 희미한 망령
				NAME:TARGET = 희미한망령
				BASE:TARGET:체력 = 800
				ABL:TARGET:전투능력 = RAND:4 + 3
				ABL:TARGET:레벨 = (RAND:20 + 25 + (ABL:MASTER:레벨/8))
				CFLAG:TARGET:힘 = RAND:20 + 25 + (CFLAG:MASTER:힘/8)
				CFLAG:TARGET:지성 = RAND:20 + 18 + (CFLAG:MASTER:지성/8)
				CFLAG:TARGET:속도 = RAND:20 + 25 + (CFLAG:MASTER:속도/8)
				CFLAG:TARGET:인내 = RAND:15 + 35 + (CFLAG:MASTER:인내/6)
				CFLAG:TARGET:운 = RAND:20 + 8 + (CFLAG:MASTER:운/7)
				CFLAG:물리내성 = 15 * ABL:TARGET:레벨
				CFLAG:정신내성 = -5 * ABL:TARGET:레벨
				TALENT:TARGET:정화 = 1
				TALENT:TARGET:탄막소사 = 1
				TALENT:TARGET:전투스타일 = 1
		;	CASE 1
				
		;ENDSELECT
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 흐릿한 영체는 곧 소멸되어 사라졌다...
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 영체는 돌연히 사라졌다
						PRINTFORML 그러나 결계의 불안정화가 한층 더 가속된 것 같다
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW

			CASE 1

		ENDSELECT
ENDSELECT

@TT_MAP_5(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
;시간과 정신의 방
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 20
		TT_STABLE = 5
		TT_ENAMY_DISABLE = 1
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,6,6,6,6,6,6,6,6,6,6,6,6,6,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		TT_OBJECT:6 '= "～"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORM 반짝이는 무언가
			CASE 6
				PRINTFORM 고산수
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					LOCAL:5 = 0
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 1000
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
			CASE 6
				PRINTFORMW 허무의 공간 속에서 전투훈련에 임했다!
				CALL 경험치처리(MASTER,40)
				CALL 경험치처리(MASTER,40)
				EXP:MASTER:전투경험 += 2
				IF ITEM:101 && !RAND:2
					EXP:MASTER:전투경험 ++
					CALL 경험치처리(MASTER,50)
				ENDIF
				IF RAND:10 == 0
					;부상
					SELECTCASE RAND:5
						CASE 0
							CALL T_부상(MASTER,"힘",10)
						CASE 1
							CALL T_부상(MASTER,"지성",10)
						CASE 2
							CALL T_부상(MASTER,"인내",10)
						CASE 3
							CALL T_부상(MASTER,"속도",10)
						CASE 4
							CALL T_부상(MASTER,"운",10)
					ENDSELECT
					TFLAG:마스터부상 = 1
					DOWNBASE:MASTER:체력 += 300
				ENDIF
				IF 선인화의길 >= 10 && 선인화의길 < 20
					IF 명중판정(10)
						선인화의길++
						IF 선인화의길 >= 20
							PRINTFORML 지금껏 섭취한 선도의 힘과 훈련의 성과로, 무언가 몸에 변화가 생길것만 같은 기분이 든다!
							PRINTFORML 지금이라면 [선인], 운이 좋으면 [천인]이 될 수 있을 것만 같은 기분이다
							변화의술고정 = 0
						ENDIF
					ENDIF
				ENDIF
				LOCAL:5 += RAND:5
				TT_HP_DOWN += 50
				IF LOCAL:5 >= 200
					PRINTFORMW 결계가 일그러지며 순식간에 밖으로 튕겨져 버렸다!
					LOCAL:5 = 0
					TT_GETOUT = 1
				ENDIF
		ENDSELECT
	CASE "적"
		
	CASE "적애프터"
		
ENDSELECT

@TT_MAP_10001(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
#DIM 스톡,30
#DIM DYNAMIC 모드
;바깥세계-도시
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 10
		TT_STABLE = 100
		;Y
		TT_SPAWN:0 = 7
		;X
		TT_SPAWN:1 = 34
		;맵 드로잉
		;          = 00,01,02,03,04,05,06,07,08,09,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34
		TT_맵:00:0 = 03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,06,09,09,09,09,09,09,09,09,09,06,03,03
		TT_맵:01:0 = 04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,02,00,00,00,00,00,00,00,00,00,02,04,04
		TT_맵:02:0 = 03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,03,02,00,00,00,00,00,00,00,00,00,02,03,03
		TT_맵:03:0 = 04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,04,06,00,00,00,00,00,00,00,00,00,06,04,04
		TT_맵:04:0 = 07,08,08,08,08,08,07,08,08,08,08,08,07,08,08,08,08,08,07,08,08,08,02,10,09,11,10,08,11,10,09,11,02,08,08
		TT_맵:05:0 = 00,07,09,09,09,07,00,07,09,09,09,07,00,07,09,09,09,07,00,00,00,00,02,02,00,13,12,15,13,12,00,02,02,00,00
		TT_맵:06:0 = 00,02,00,00,00,02,00,02,00,00,00,02,00,02,00,00,00,02,00,00,00,00,00,00,00,00,00,15,00,00,13,12,00,00,00
		TT_맵:07:0 = 00,02,00,00,00,02,00,02,00,00,00,02,00,02,00,00,00,02,00,00,00,00,00,00,00,00,00,15,00,00,00,00,00,00,01
		TT_맵:08:0 = 00,02,00,00,00,02,00,02,00,00,00,02,00,02,00,00,00,02,00,00,00,00,00,00,00,00,00,15,00,00,00,00,00,00,00
		TT_맵:09:0 = 00,07,09,09,09,07,00,07,09,09,09,07,00,07,09,09,09,07,00,08,08,08,08,08,08,08,08,15,08,08,08,08,08,08,08
		TT_맵:10:0 = 00,00,00,14,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00
		TT_맵:11:0 = 09,09,09,15,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,08,09,09,09,09
		TT_맵:12:0 = 09,09,02,15,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,02,00,00,00,00,00,00,00,15,09,09,09,09
		TT_맵:13:0 = 09,09,09,15,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,00,00,00,00,00,00,00,15,09,09,09,09
		TT_맵:14:0 = 09,09,09,15,02,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,09,00,00,00,00,00,00,00,15,02,09,09,09
		TT_맵:15:0 = 09,09,09,15,09,09,09,11,00,10,09,09,09,09,09,09,09,09,09,09,09,09,09,18,00,00,00,00,00,17,08,09,09,09,09
		TT_맵:16:0 = 00,00,00,00,00,00,00,16,16,16,00,00,00,00,00,00,00,00,00,00,00,00,00,00,18,00,00,00,17,00,00,00,00,00,00
		TT_맵:17:0 = 00,07,09,09,09,07,00,02,02,02,00,07,09,09,09,09,07,00,07,09,09,09,07,00,16,16,16,16,16,00,07,09,09,09,07
		TT_맵:18:0 = 00,02,00,00,00,02,00,02,02,02,00,02,00,00,00,00,02,00,02,00,00,00,02,00,02,09,02,02,02,00,02,00,00,00,02
		TT_맵:19:0 = 00,02,00,00,00,02,00,02,02,02,00,02,00,00,00,00,02,00,02,00,00,00,02,14,02,02,02,02,02,00,02,00,00,00,02
		TT_맵:20:0 = 00,02,00,00,00,02,14,02,02,02,00,02,00,00,00,00,02,00,02,00,00,00,02,00,02,02,02,02,02,00,02,00,00,00,02
		TT_맵:21:0 = 00,02,00,00,00,02,00,02,02,02,00,02,00,00,00,00,02,14,07,09,09,09,07,00,02,02,02,02,02,00,07,09,09,08,07
		TT_맵:22:0 = 00,02,00,00,00,02,00,02,02,02,00,02,00,00,00,00,02,00,00,00,00,00,00,00,02,02,02,02,02,00,00,00,14,00,00
		TT_맵:23:0 = 00,07,09,09,09,07,00,02,02,02,00,02,00,00,00,00,02,00,07,09,09,09,07,00,02,02,02,02,02,00,07,09,09,09,07
		TT_맵:24:0 = 00,00,00,00,00,00,00,02,02,02,00,07,09,09,09,09,07,00,02,00,00,00,02,00,02,02,02,02,02,00,02,00,00,00,02
		TT_맵:25:0 = 09,09,09,09,09,08,09,12,02,02,00,00,00,00,00,00,00,00,02,00,00,00,02,00,02,02,02,02,02,00,02,00,00,00,02
		TT_맵:26:0 = 09,09,09,09,09,15,09,09,12,02,00,07,09,09,09,09,07,00,02,00,00,00,02,00,02,02,02,02,02,00,02,00,00,00,02
		TT_맵:27:0 = 09,09,09,09,09,08,09,09,09,12,00,02,00,00,00,00,02,00,07,09,09,09,07,00,02,02,02,02,02,00,07,09,09,09,07
		TT_맵:28:0 = 00,00,00,14,00,00,00,00,00,00,00,02,00,00,00,00,02,00,00,00,00,00,00,00,02,02,02,02,02,00,00,00,00,00,00
		TT_맵:29:0 = 00,07,09,09,09,07,09,09,09,07,00,02,00,00,00,00,02,00,07,09,09,09,07,00,02,02,02,02,02,00,07,09,09,09,07
		TT_맵:30:0 = 00,02,00,00,00,02,00,00,00,02,00,02,00,00,00,00,02,14,02,00,00,00,02,00,02,02,02,09,02,00,02,00,00,00,02
		TT_맵:31:0 = 00,02,00,00,00,02,00,00,00,02,00,02,00,00,00,00,02,00,02,00,00,00,02,00,16,16,16,16,16,00,02,00,00,00,02
		TT_맵:32:0 = 00,02,00,00,00,02,00,00,00,02,00,02,00,00,00,00,02,00,02,00,00,00,02,00,02,09,02,02,02,00,02,00,00,00,02
		TT_맵:33:0 = 00,07,09,09,09,07,09,09,09,07,00,07,09,09,09,09,07,00,07,09,09,09,07,00,02,02,02,02,02,00,07,09,09,09,07
		TT_맵:34:0 = 00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,02,02,02,02,02,00,00,00,14,00,00
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "│"
		TT_OBJECT:3 '= "┬"
		TT_OBJECT:4 '= "┴"
		TT_OBJECT:5 '= "|"
		TT_OBJECT:6 '= "●"
		TT_OBJECT:7 '= "■"
		TT_OBJECT:8 '= "〓"
		TT_OBJECT:9 '= "─"
		TT_OBJECT:10 '= "┌"
		TT_OBJECT:11 '= "┐"
		TT_OBJECT:12 '= "┘"
		TT_OBJECT:13 '= "└"
		TT_OBJECT:14 '= "▣"
		TT_OBJECT:15 '= "三"
		TT_OBJECT:16 '= "||"
		TT_OBJECT:17 '= "／"
		TT_OBJECT:18 '= "＼"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 1
		TT_OBJECT_TYPE:5 = 1
		TT_OBJECT_TYPE:6 = 1
		TT_OBJECT_TYPE:7 = 1
		TT_OBJECT_TYPE:8 = 0
		TT_OBJECT_TYPE:9 = 1
		TT_OBJECT_TYPE:10 = 1
		TT_OBJECT_TYPE:11 = 1
		TT_OBJECT_TYPE:12 = 1
		TT_OBJECT_TYPE:13 = 1
		TT_OBJECT_TYPE:14 = 0
		TT_OBJECT_TYPE:15 = 0
		TT_OBJECT_TYPE:16 = 0
		TT_OBJECT_TYPE:17 = 1
		TT_OBJECT_TYPE:18 = 1


		LOCAL:5 = 0
		VARSET 스톡
		스톡:1 = 10
		스톡:2 = 50
		스톡:3 = 25
		스톡:4 = 20
		스톡:11 = 5
		스톡:12 = 50
		스톡:13 = 5
		스톡:14 = 5
		스톡:21 = 30
		스톡:22 = 15
		스톡:23 = 5
		스톡:24 = 10
		스톡:25 = 10
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
			CASE 5
			CASE 6
			CASE 7
			CASE 8
			CASE 9
			CASE 10
			CASE 11
			CASE 12
			CASE 13
			CASE 14
				PRINTFORM 가게에 들릴 수 있다
			CASE 15
			CASE 16
			CASE 17
			CASE 18
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
			CASE 5
			CASE 6
			CASE 7
			CASE 8
			CASE 9
			CASE 10
			CASE 11
			CASE 12
			CASE 13
			CASE 14
				IF TT_NOW:0 == 10 && TT_NOW:1 == 3
					;북서쪽, 술집
					$LOOP_술집
					PRINTFORML 술집에 들렸다...
					PRINTFORML 소지금 : {MONEY}
					DRAWLINE
					PRINTFORML [001] - 브랜디XO(245000￦)(재고:{스톡:1})
					PRINTFORML [002] - 맥주(3000￦)(재고:{스톡:2})
					PRINTFORML [003] - 위스키(6500￦)(재고:{스톡:3})
					PRINTFORML [004] - 빈티지 와인(30000￦)(재고:{스톡:4})
					DRAWLINE
					PRINTFORML [999] 돌아간다
					INPUT
					IF RESULT == 999
						RETURN
					ELSEIF RESULT == 1
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_술집
						ENDIF
						IF MONEY >= 250000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:브랜디XO++
							MONEY -= 250000
							PRINTFORML 브랜디XO를 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ELSEIF RESULT == 2
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_술집
						ENDIF
						IF MONEY >= 3500
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:맥주++
							MONEY -= 3500
							PRINTFORML 맥주를 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ELSEIF RESULT == 3
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_술집
						ENDIF
						IF MONEY >= 7000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:위스키++
							MONEY -= 7000
							PRINTFORML 위스키를 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ELSEIF RESULT == 4
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_술집
						ENDIF
						IF MONEY >= 35000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:빈티지와인++
							MONEY -= 35000
							PRINTFORML 빈티지와인을 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ENDIF
					GOTO LOOP_술집
				ELSEIF TT_NOW:0 == 20 && TT_NOW:1 == 7
					;마트
					$LOOP_마트
					PRINTFORML 마트에 들렸다...
					PRINTFORML 소지금 : {MONEY}
					DRAWLINE
					PRINTFORML [011] - 쌀 1포대(50000￦)(재고:{스톡:11})
					PRINTFORML [012] - 초콜릿(1000￦)(재고:{스톡:12})
					PRINTFORML [013] - 과자세트(15000￦)(재고:{스톡:13})
					PRINTFORML [014] - 생선(2000￦)(재고:{스톡:14})
					DRAWLINE
					PRINTFORML [999] 돌아간다
					INPUT
					IF RESULT == 999
						RETURN
					ELSEIF RESULT == 11
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_마트
						ENDIF
						IF MONEY >= 50000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:쌀 += 200
							MONEY -= 50000
							PRINTFORML 쌀을 200개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ELSEIF RESULT == 12
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_마트
						ENDIF
						IF MONEY >= 1000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:초콜릿 += 1
							MONEY -= 1000
							PRINTFORML 초콜릿을 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ELSEIF RESULT == 13
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_마트
						ENDIF
						IF MONEY >= 15000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:과자상자 += 1
							MONEY -= 15000
							PRINTFORML 과자상자를 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ELSEIF RESULT == 14
						IF !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_마트
						ENDIF
						IF MONEY >= 2000
							스톡:RESULT = MAX(0,스톡:RESULT - 1)
							ITEM:맛있는물고기 += 1
							MONEY -= 15000
							PRINTFORML 물고기를 1개 구매했다
						ELSE
							PRINTW 돈이 없다
						ENDIF
					ENDIF
					GOTO LOOP_마트
				ELSEIF TT_NOW:0 == 30 && TT_NOW:1 == 17
					$LOOP_학원
					IF LOCAL:5 >= 50
						PRINTFORMW 지쳐서 오늘은 더 할 수 없다
						RETURN
					ENDIF
					PRINTFORML 학원가에 들렸다...
					PRINTFORML 소지금 : {MONEY}
					DRAWLINE
					PRINTFORML [0] 요리학원
					PRINTFORML [1] 국영수학원(50000\\)
					PRINTFORML [2] 음악학원(25000\\)
					PRINTFORML [3] 체육관(50000\\)
					PRINTFORML [9] 돌아간다
					INPUT
					IF RESULT == 0
						PRINTFORML 무슨 요리를 배울까?(1개당 25000\\)
						PRINTFORML [024] 치즈케이크
						PRINTFORML [026] 라멘
						PRINTFORML [030] 카레라이스
						PRINTFORML [031] 가라아게
						PRINTFORML [033] 감자 샐러드
						PRINTFORML [000] 돌아간다
						INPUT
						IF RESULT == 0
							GOTO LOOP_학원
						ELSEIF GROUPMATCH(RESULT,24,26,30,31,33) 
							IF MONEY >= 25000
								MONEY -= 25000
								EXP:MASTER:요리경험 += 50
								LOCAL:5 += RAND:5 * 5
								TT_HP_DOWN += 50
								TIME += 60
								CALL RCP_LEARN(RESULT)
							ELSE
								PRINTFORMW 돈이 없다
							ENDIF
						ENDIF
					ELSEIF RESULT == 1
						PRINTFORML 학원에서의 공부로 지식을 잔뜩 주입당했다!
						EXP:MASTER:학습경험 += 50
						LOCAL:5 += RAND:5 * 5
						TT_HP_DOWN += 50
						TIME += 60
					ELSEIF RESULT == 2
						PRINTFORML 학원에서의 공부로 연주에 자신이 붙는다!
						EXP:MASTER:연주경험 += 50
						LOCAL:5 += RAND:5 * 5
						TT_HP_DOWN += 50
						TIME += 60
					ELSEIF RESULT == 3
						PRINTFORML 운동으로 근육이 붙는다!
						EXP:MASTER:전투경험 += 25
						LOCAL:5 += RAND:5 * 5
						TT_HP_DOWN += 250
						TIME += 60
					ELSEIF RESULT == 9
						RETURN
					ELSE
						GOTO LOOP_학원
					ENDIF
					GOTO LOOP_학원
				ELSEIF TT_NOW:0 == 21 && TT_NOW:1 == 17
					PRINTFORML 호텔에 들렸다...
					PRINTFORML 소지금:{MONEY}
					PRINTFORML [0] 묵고 간다(50000\\)
					PRINTFORML [9] 돌아간다
					INPUT
					IF RESULT == 0
						IF MONEY < 50000
							PRINTFORMW 돈이 없다
							RETURN
						ELSE
							MONEY -= 50000
							TT_HP_DOWN = 0
							LOCAL:5 = 0
							TIME += 12 * 60
							PRINTFORMW 호텔에서 하룻밤을 보냈다...
						ENDIF
					ENDIF
				ELSEIF TT_NOW:0 == 19 && TT_NOW:1 == 23
					$LOOP_건강원
					PRINTL
					PRINTFORML 건강원에 들렸다...
					PRINTFORML 소지금 : {MONEY}
					DRAWLINE
					PRINTFORML [021] - 약초(250￦)(재고:\@모드 == 0 ? {스톡:21} # {ITEM:약초}\@)
					PRINTFORML [022] - 상약초(500￦)(재고:\@모드 == 0 ? {스톡:22} # {ITEM:상약초}\@)
					PRINTFORML [023] - 특약초(10000￦)(재고:\@모드 == 0 ? {스톡:23} # {ITEM:특약초}\@)
					PRINTFORML [024] - 두꺼비기름(5000￦)(재고:\@모드 == 0 ? {스톡:24} # {ITEM:두꺼비기름}\@)
					PRINTFORML [025] - 동충하초(2000￦)(재고:\@모드 == 0 ? {스톡:25} # {ITEM:동충하초}\@)
					PRINTFORML [026] - 고려인삼(5000￦)(재고:\@모드 == 0 ? {스톡:26} # {ITEM:고려인삼}\@)
					DRAWLINE
					PRINTFORML [998] \@모드 == 0 ? 판매모드 # 구매모드\@
					PRINTFORML [999] 돌아간다
					INPUT
					IF RESULT == 999
						RETURN
					ELSEIF RESULT == 998
						모드 = !모드
					ELSEIF RESULT == 21
						IF !모드 && !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_건강원
						ELSEIF 모드 && !ITEM:약초
							PRINTFORMW 가지고 있지 않다
							GOTO LOOP_건강원
						ENDIF
						IF !모드
							IF MONEY >= 250
								스톡:RESULT = MAX(0,스톡:RESULT - 1)
								ITEM:약초 += 1
								MONEY -= 250
								PRINTFORML 약초를 구매했다
							ELSE
								PRINTW 돈이 없다
							ENDIF
						ELSE
							ITEM:약초 -= 1
							MONEY += 250
							PRINTFORML 약초를 판매했다
						ENDIF
					ELSEIF RESULT == 22
						IF !모드 && !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_건강원
						ELSEIF 모드 && !ITEM:상약초
							PRINTFORMW 가지고 있지 않다
							GOTO LOOP_건강원
						ENDIF
						IF !모드
							IF MONEY >= 500
								스톡:RESULT = MAX(0,스톡:RESULT - 1)
								ITEM:상약초 += 1
								MONEY -= 500
								PRINTFORML 상약초를 구매했다
							ELSE
								PRINTW 돈이 없다
							ENDIF
						ELSE
							ITEM:상약초 -= 1
							MONEY += 500
							PRINTFORML 상약초를 판매했다
						ENDIF
					ELSEIF RESULT == 23
						IF !모드 && !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_건강원
						ELSEIF 모드 && !ITEM:특약초
							PRINTFORMW 가지고 있지 않다
							GOTO LOOP_건강원
						ENDIF
						IF !모드
							IF MONEY >= 10000
								스톡:RESULT = MAX(0,스톡:RESULT - 1)
								ITEM:특약초 += 1
								MONEY -= 10000
								PRINTFORML 특약초를 구매했다
							ELSE
								PRINTW 돈이 없다
							ENDIF
						ELSE
							ITEM:특약초 -= 1
							MONEY += 10000
							PRINTFORML 특약초를 판매했다
						ENDIF
					ELSEIF RESULT == 24
						IF !모드 && !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_건강원
						ELSEIF 모드 && !ITEM:두꺼비기름
							PRINTFORMW 가지고 있지 않다
							GOTO LOOP_건강원
						ENDIF
						IF !모드
							IF MONEY >= 5000
								스톡:RESULT = MAX(0,스톡:RESULT - 1)
								ITEM:두꺼비기름 += 1
								MONEY -= 5000
								PRINTFORML 두꺼비기름을 구매했다
							ELSE
								PRINTW 돈이 없다
							ENDIF
						ELSE
							ITEM:두꺼비기름 -= 1
							MONEY += 5000
							PRINTFORML 두꺼비기름을 판매했다
						ENDIF
					ELSEIF RESULT == 25
						IF !모드 && !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_건강원
						ELSEIF 모드 && !ITEM:동충하초
							PRINTFORMW 가지고 있지 않다
							GOTO LOOP_건강원
						ENDIF
						IF !모드
							IF MONEY >= 2000
								스톡:RESULT = MAX(0,스톡:RESULT - 1)
								ITEM:동충하초 += 1
								MONEY -= 2000
								PRINTFORML 동충하초를 구매했다
							ELSE
								PRINTW 돈이 없다
							ENDIF
						ELSE
							ITEM:동충하초 -= 1
							MONEY += 2000
							PRINTFORML 동충하초를 판매했다
						ENDIF
					ELSEIF RESULT == 26
						IF !모드 && !스톡:RESULT
							PRINTFORMW 재고가 없다
							GOTO LOOP_건강원
						ELSEIF 모드 && !ITEM:고려인삼
							PRINTFORMW 가지고 있지 않다
							GOTO LOOP_건강원
						ENDIF
						IF !모드
							IF MONEY >= 5000
								스톡:RESULT = MAX(0,스톡:RESULT - 1)
								ITEM:고려인삼 += 1
								MONEY -= 5000
								PRINTFORML 고려인삼을 구매했다
							ELSE
								PRINTW 돈이 없다
							ENDIF
						ELSE
							ITEM:고려인삼 -= 1
							MONEY += 5000
							PRINTFORML 고려인삼을 판매했다
						ENDIF
					ENDIF
					GOTO LOOP_건강원
				ELSEIF TT_NOW:0 == 34 && TT_NOW:1 == 32
					PRINTFORML 은행에 들렸다...무엇을 할까?
					PRINTFORML 잔고:{바깥은행} / 소지금:{MONEY}
					PRINTFORML [0] 입금
					PRINTFORML [1] 출금
					PRINTFORML [9] 돌아간다
					INPUT
					IF RESULT == 0
						PRINTFORML 얼마?
						INPUT
						바깥은행 += MIN(RESULT,MONEY)
						MONEY = MAX(MONEY - RESULT,0)
						PRINTFORML 입금했다
					ELSEIF RESULT == 1
						PRINTFORML 얼마?
						INPUT
						MONEY += MIN(RESULT,바깥은행)
						바깥은행 = MAX(바깥은행 - RESULT,0)
						PRINTFORML 인출했다
					ELSEIF RESULT == 9
						RETURN
					ENDIF
				ELSEIF TT_NOW:0 == 22 && TT_NOW:1 == 32
					$LOOP_성인용품점
					PRINTFORML 성인용품점에 들렸다...

					PRINTFORMW ...공사중이다
					RETURN


					PRINTFORML [0] 로터 강화
					PRINTFORML [9] 돌아간다
					INPUT
					IF RESULT == 9
						RETURN
					ELSEIF RESULT == 0

					ELSE

					ENDIF
					GOTO LOOP_성인용품점
				ELSEIF TT_NOW:0 == 28 && TT_NOW:1 == 3
					$LOOP_도서관
					IF LOCAL:5 >= 50
						PRINTFORMW 지쳐서 오늘은 더 할 수 없다
						RETURN
					ENDIF
					PRINTFORML 도서관에 들렸다...무슨책을 읽을까?
					PRINTFORML [0] %TEXTR("말 잘하는 법/대화의 기술/유창하게 말하기")%
					PRINTFORML [2] %TEXTR("초보자도 익히는 쉬운 요리 100선/조리기능사 실습/전통요리 입문")%
					PRINTFORML [3] %TEXTR("낚시, 너도 할 수 있다/XX대, 낚시에 미쳐라/물고기를 낚는 어부가 되어라")%
					PRINTFORML [4] %TEXTR("약초와 독초 구별법/희귀 식물 일람/약용 식물 일람")%
					PRINTFORML [5] %TEXTR("신비로운 연금술의 세계/조제의 비법/WHY? 연금술")%
					PRINTFORML [9] 돌아간다
					INPUT
					IF GROUPMATCH(RESULT,0,2,3,4,5)
						SELECTCASE RESULT
							CASE 0
								EXP:MASTER:회화경험 += 2
								IF FLAG:훈련강화
									CALL AddEXP("회화경험" , MASTER, 1)
								ENDIF
							CASE 2
								EXP:MASTER:요리경험 += 2
								IF FLAG:훈련강화
									CALL AddEXP("요리경험" , MASTER, 1)
								ENDIF
							CASE 3
								EXP:MASTER:낚시경험 += 2
								IF FLAG:훈련강화
									CALL AddEXP("낚시경험" , MASTER, 1)
								ENDIF
							CASE 4
								EXP:MASTER:채집경험 += 2
								IF FLAG:훈련강화
									CALL AddEXP("채집경험" , MASTER, 1)
								ENDIF
							CASE 5
								EXP:MASTER:조제경험 += 2
								IF FLAG:훈련강화
									CALL AddEXP("조제경험" , MASTER, 1)
								ENDIF
						ENDSELECT
						LOCAL:5 += RAND:5 * 5
						TT_HP_DOWN += 50
						TIME += 20
					ELSEIF RESULT == 9
						RETURN
					ENDIF
					GOTO LOOP_도서관
				ENDIF
			CASE 15
			CASE 16
			CASE 17
			CASE 18
		ENDSELECT
	CASE "적"
		TT_ENAMY = 0
		PRINTFORMW 적이 나타났다!
		CALLNAME:TARGET = 1
		NAME:TARGET = 1
		BASE:TARGET:체력 = 1
		ABL:TARGET:전투능력 = 1
		ABL:TARGET:레벨 = 1
		CFLAG:TARGET:힘 = 1
		CFLAG:TARGET:지성 = 1
		CFLAG:TARGET:속도 = 1
		CFLAG:TARGET:인내 = 1
		CFLAG:TARGET:운 = 1
		CFLAG:물리내성 = 1
		CFLAG:정신내성 = 1
		TALENT:TARGET:정화 = 1
		TALENT:TARGET:탄막소사 = 1
		TALENT:TARGET:전투스타일 = 1
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW

			CASE 1

		ENDSELECT
ENDSELECT

@TT_MAP_10002(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
;랜덤맵
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 5
		TT_STABLE = 10
		TT_ENAMY_DISABLE = 0
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		CALL D_RANDMAP()
		CALL R_MAP2TT_MAP
		CALL RDSETTING_APPLY
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
				PRINTFORM 목표
			CASE 5
				PRINTFORM 반짝이는 무언가
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
				IF D_OBJ_SUC == 1
					D_OBJ_SUC = 2
				ENDIF
			CASE 2
			CASE 3
			CASE 4
				CALL RD_OBJ_INTERACTION()
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 500
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
		ENDSELECT
	CASE "적"
		CALL RD_ENAMY(D_ENAMY)
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						CALL RD_ENAMY(D_ENAMY, 0)
					CASE 1
						;무승부
						CALL RD_ENAMY(D_ENAMY, 1)
					CASE 2
						CALL RD_ENAMY(D_ENAMY, 2)
				ENDSELECT
				TT_TIMEOUT += RESULT
				PRINTW
				RETURN ARG:1
			CASE 1

		ENDSELECT
ENDSELECT

[SKIPSTART]
@TT_MAP_{번호}(타입,ARG = 0,ARG:1 = 0)
#DIMS DYNAMIC 타입
;
SELECTCASE 타입
	CASE "초기화"
		;값 설정
		TT_SIGHT = 3
		TT_STABLE = 10
		TT_ENAMY_DISABLE = 0
		;맵 드로잉
		TT_맵:00:0 = 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:01:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:02:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:03:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:04:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:05:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:06:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:07:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:08:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:09:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:10:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:11:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:12:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:13:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:14:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:15:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:16:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:17:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:18:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:19:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:20:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:21:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:22:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:23:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:24:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:25:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:26:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:27:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:28:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:29:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:30:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:31:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:32:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:33:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		TT_맵:34:0 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
		;오브젝트 세팅
		TT_OBJECT:0 '= "　"
		TT_OBJECT:1 '= "♨"
		TT_OBJECT:2 '= "□"
		TT_OBJECT:3 '= "＃"
		TT_OBJECT:4 '= "▣"
		TT_OBJECT:5 '= "￦"
		;오브젝트타입
		TT_OBJECT_TYPE:0 = 0
		TT_OBJECT_TYPE:1 = 0
		TT_OBJECT_TYPE:2 = 1
		TT_OBJECT_TYPE:3 = 1
		TT_OBJECT_TYPE:4 = 0
		TT_OBJECT_TYPE:5 = 0
	CASE "플레이버텍스트"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORM 출구
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORM 반짝이는 무언가
		ENDSELECT
	CASE "상호작용"
		SELECTCASE ARG
			CASE 0
			CASE 1
				;입구
				PRINTFORML 결계의 틈새에서 나갈까?
				CALL ASK_YN
				IF !RESULT
					TT_GETOUT = 1
				ENDIF
			CASE 2
			CASE 3
			CASE 4
			CASE 5
				PRINTFORMW 약간 옛스러운 동전을 주웠다!
				LOCAL = (RAND:10 + 1) * 1000
				PRINTFORMW {LOCAL}원 얻었다
				MONEY += LOCAL
				TT_맵:(TT_NOW:0):(TT_NOW:1) = 0
		ENDSELECT
	CASE "적"
		TT_ENAMY = 0
		PRINTFORMW 
		CALLNAME:TARGET = 
		NAME:TARGET = 
		BASE:TARGET:체력 = 
		ABL:TARGET:전투능력 = 
		ABL:TARGET:레벨 = 
		CFLAG:TARGET:힘 = 
		CFLAG:TARGET:지성 = 
		CFLAG:TARGET:속도 = 
		CFLAG:TARGET:인내 = 
		CFLAG:TARGET:운 = 
		CFLAG:물리내성 = 
		CFLAG:정신내성 = 
		TALENT:TARGET:정화 = 1
		TALENT:TARGET:탄막소사 = 1
		TALENT:TARGET:전투스타일 = 1
	CASE "적애프터"
		SELECTCASE ARG
			CASE 0
				SELECTCASE ARG:1
					CASE 0
						;타겟 패배
						PRINTFORML 
						TT_TIMEOUT -= RAND:10
					CASE 1
						;무승부
						PRINTFORML 
						TT_TIMEOUT -= RAND:25
					CASE 2
						PRINTFORML 
						TT_TIMEOUT -= RAND:100 + 1
				ENDSELECT
				PRINTW

			CASE 1

		ENDSELECT
ENDSELECT
[SKIPEND]


@R_MAP2TT_MAP
FOR LOCAL,0,TT_맵MAX
	FOR LOCAL:1,0,TT_맵MAX
		TT_맵:LOCAL:(LOCAL:1) = R_MAP:LOCAL:(LOCAL:1)
	NEXT
NEXT

@D_RANDMAP(MIN_X = 0,MIN_Y = 0,MAX_X = 34,MAX_Y =34)
#DIM DYNAMIC MIN_X
#DIM DYNAMIC MIN_Y
#DIM DYNAMIC MAX_X
#DIM DYNAMIC MAX_Y
#DIM DYNAMIC RX
#DIM DYNAMIC RY
#DIM DYNAMIC RS
#DIM CONST 보정 = 2
#DIM DYNAMIC 출입구후보,50,3
#DIM DYNAMIC 출입구좌표,2
#DIM DYNAMIC 출입구목록,50,2
#DIM DYNAMIC 방위
#DIM DYNAMIC ROTATION
#DIM DYNAMIC DX
#DIM DYNAMIC DY
#DIM DYNAMIC D방내용물
#DIM DYNAMIC D_ROOM,10,4
#DIM DYNAMIC 방갯수
#DIMS DYNAMIC ROAD,100
#DIM CONST D_공란 = 0
#DIM CONST D_벽 = 2
#DIM CONST D_금 = 5
#DIM CONST D_길 = 6
#DIM CONST D_보스 = 4
;생성되는 맵타일
;0 = 빈공간
;1 = 길
;4 = 벽
;10X0Y = 문, X번방 Y번 문 

VARSET R_MAP, D_벽
MIN_X += 보정
MIN_Y += 보정
MAX_X -= 보정
MAX_Y -= 보정

LOCAL = RAND:4 + 3
LOCAL:6 = 0
LOCAL:7 = 1
;방 생성
REPEAT LOCAL
	LOCAL:2 = 0
	LOCAL:3 = 0
	LOCAL:4 = 0
	LOCAL:5 = 0
	RS = RAND:4 + 2 ; 방 크기(반지름)
	;4 방향으로 나누어 분배
	SELECTCASE ROTATION
		CASE 0
			;좌상
			RX = RAND(MIN_X,MAX_X/2) ; X점
			RY = RAND(MIN_Y,MAX_Y/2) ; Y점
		CASE 1
			;우상
			RX = RAND(MIN_X + (MAX_X/2),MAX_X) ; X점
			RY = RAND(MIN_Y,MAX_Y/2) ; Y점
		CASE 2
			;우하
			RX = RAND(MIN_X + (MAX_X/2),MAX_X) ; X점
			RY = RAND(MIN_Y + (MAX_Y/2),MAX_Y) ; Y점
		CASE 3
			;좌하
			RX = RAND(MIN_X,MAX_X/2) ; X점
			RY = RAND(MIN_Y + (MAX_Y/2),MAX_Y) ; Y점
	ENDSELECT
	;방 정보 저장
	D_ROOM:(COUNT):0 = RX
	D_ROOM:(COUNT):1 = RY
	D_ROOM:(COUNT):2 = RS
	방갯수++
	IF ROTATION >= 3
		ROTATION = 0
	ELSE
		ROTATION++
	ENDIF
	;방 내부 생성
	FOR LOCAL:2, MAX(MIN_Y - 보정, RY - RS), MIN(MAX_Y + 보정, RY + RS) ;Y축
		FOR LOCAL:3, MAX(MIN_X - 보정, RX - RS), MIN(MAX_X + 보정, RX + RS) ;X축
			;공란
			D방내용물 = D_공란
			IF RAND:100 == 0
				D방내용물 = D_금
			ENDIF
			R_MAP:(LOCAL:2):(LOCAL:3) = D방내용물
			;외곽 라인을 메모
			IF LOCAL:3 == RX - RS || LOCAL:3 == RX + RS || LOCAL:2 == RY - RS || LOCAL:2 == RY + RS
				IF (LOCAL:3 == RX - RS && LOCAL:2 == RY - RS) || (LOCAL:2 == RY + RS && LOCAL:3 == RX + RS) || (LOCAL:2 == RY + RS && LOCAL:3 == RX - RS) || (LOCAL:2 == RY - RS && LOCAL:3 == RX + RS)
					;귀퉁이는 제외
				ELSE
					출입구후보:(LOCAL:4):0 = LOCAL:2 ;Y
					출입구후보:(LOCAL:4):1 = LOCAL:3 ;X
					출입구후보:(LOCAL:4):2 = COUNT ;방 정보
				ENDIF
				R_MAP:(LOCAL:2):(LOCAL:3) = D_벽 ; 외곽을 벽처리
				LOCAL:4++
			ENDIF
		NEXT
	NEXT
	;방의 외곽 생성
	FOR LOCAL:6,0,RAND:2 + 1
		LOCAL:5 = RAND:(LOCAL:4) ; 후보중 산정
		IF 출입구후보:(LOCAL:5):0 == 0 && 출입구후보:(LOCAL:5):1 == 0
			CONTINUE
		ENDIF
		출입구좌표:0 = 출입구후보:(LOCAL:5):0 ;Y
		출입구좌표:1 = 출입구후보:(LOCAL:5):1 ;X
		출입구목록:(LOCAL:7):0 = 출입구좌표:0
		출입구목록:(LOCAL:7):1 = 출입구좌표:1
		R_MAP:(출입구좌표:0):(출입구좌표:1) = 10000 + (COUNT) * 100 + LOCAL:6 + 1;출입구를 10000 + 방번호로 변경
		LOCAL:7++
	NEXT
REND
LOCAL = RAND:방갯수 - 1
LOCAL ++
R_MAP:((D_ROOM:LOCAL:1) + (RAND:(D_ROOM:LOCAL:2) * (RAND:2 - 1))):((D_ROOM:LOCAL:0) + (RAND:(D_ROOM:LOCAL:2) * (RAND:2 - 1))) = D_보스
LOCAL:2 = 0
LOCAL:3 = 0
FOR LOCAL,0,LOCAL:7
	DY = 출입구목록:(LOCAL):0
	DX = 출입구목록:(LOCAL):1
	;LOCAL:8 = RAND:(LOCAL:7)
	;동일 출입구 배제
	WHILE ((R_MAP:(출입구목록:(LOCAL:8):0):(출입구목록:(LOCAL:8):1) - 10000)/ 100) == ((R_MAP:(출입구목록:(LOCAL:8 + 1):0):(출입구목록:(LOCAL:8 + 1):1) - 10000) / 100) || LOCAL:8 == LOCAL
		LOCAL:8 = LOCAL:8 + 1
		IF LOCAL:8 > LOCAL:7
			LOCAL:8 = 0
		ENDIF
	WEND
	CALL D_FINDWAY(DX,DY,출입구목록:(LOCAL:8):1,출입구목록:(LOCAL:8):0)
	SPLIT RESULTS,"/",ROAD
	LOCAL:1 = 0
	;산출된 경로 적용
	WHILE LOCAL:1 < RESULT
		SELECTCASE ROAD:(LOCAL:1)
			CASE "UP"
				DY --
			CASE "DOWN"
				DY ++
			CASE "RIGHT"
				DX ++
			CASE "LEFT"
				DX --
		ENDSELECT
		IF R_MAP:(DY):(DX) == D_길
			LOCAL:2 ++
			;길이 아예 안생기는 경우를 방지하기 위한 약간의 보정
			SIF LOCAL:2 >= 2
				LOCAL:1 = RESULT
		ENDIF
		R_MAP:(DY):(DX) = D_길
		LOCAL:1++
	WEND
NEXT
;최초 입구 설정
LOCAL:2 = 0
DX = 0
DY = 0
CALL D_FINDWAY(0,0,출입구목록:(0):1,출입구목록:(0):0)
SPLIT RESULTS,"/",ROAD
LOCAL:1 = 0
WHILE LOCAL:1 < RESULT
	SELECTCASE ROAD:(LOCAL:1)
		CASE "UP"
			DY --
		CASE "DOWN"
			DY ++
		CASE "RIGHT"
			DX ++
		CASE "LEFT"
			DX --
	ENDSELECT
	IF R_MAP:(DY):(DX) == D_길
		LOCAL:2 ++
		SIF LOCAL:2 >= 2
			LOCAL:1 = RESULT
	ENDIF
	R_MAP:(DY):(DX) = D_길
	LOCAL:1++
WEND
R_MAP:0:0 = 1

;적절하게 맵 포팅
FOR LOCAL,0,MAX_Y + 1
	FOR LOCAL:1,0,MAX_X + 1
		SELECTCASE R_MAP:LOCAL:(LOCAL:1)
			CASE IS > 10000
				R_MAP:LOCAL:(LOCAL:1) = D_공란
			CASE D_길
				R_MAP:LOCAL:(LOCAL:1) = D_공란
		ENDSELECT
	NEXT
NEXT

@D_FINDWAY(AX,AY,BX,BY,MIN_X = 0,MIN_Y = 0,MAX_X = 34,MAX_Y =34)
#DIM DYNAMIC AX ;출발점
#DIM DYNAMIC AY
#DIM DYNAMIC BX ;도착점
#DIM DYNAMIC BY
#DIM DYNAMIC NX ;현재위치
#DIM DYNAMIC NY
#DIM DYNAMIC MIN_X
#DIM DYNAMIC MIN_Y
#DIM DYNAMIC MAX_X
#DIM DYNAMIC MAX_Y
#DIMS DYNAMIC ROAD
#DIM DYNAMIC 스위치

NX = AX ;현재위치
NY = AY
스위치 = RAND:2
FOR LOCAL,0,100
	IF NY != BY && 스위치 == 0
		IF NY < BY
			IF !INRANGE(NY,MIN_Y,MAX_Y) || NY <= MIN_Y || NY >= MAX_Y
				스위치 = 1
			ENDIF
			IF NY != BY
				NY++
				ROAD += "DOWN/"
				LOCAL:1++
			ELSE
				스위치 = 1
			ENDIF
			IF NY + 3 > MIN_Y && ABS(NY - BY) > 5
				IF R_MAP:(NY + 2):NX == 0 && R_MAP:(NY + 3):NX == 0 
					스위치 = 1
				ENDIF
			ENDIF
		ELSEIF NY == BY

		ELSEIF NY > BY
			IF !INRANGE(NY,MIN_Y,MAX_Y) || NY <= MIN_Y || NY >= MAX_Y
				스위치 = 1
			ENDIF
			IF NY != BY
				NY--
				ROAD += "UP/"
				LOCAL:1++
			ELSE
				스위치 = 1
			ENDIF
			IF NY - 3 > MIN_Y && ABS(NY - BY) > 5
				IF R_MAP:(NY - 2):NX == 0 && R_MAP:(NY - 3):NX == 0 
					스위치 = 1
				ENDIF
			ENDIF
		ENDIF
	ELSE
		IF NX < BX
			IF !INRANGE(NX,MIN_X,MAX_X) || NX <= MIN_X || NX >= MAX_X
				스위치 = 0
			ENDIF
			IF NX != BX
				NX++
				ROAD += "RIGHT/"
				LOCAL:1++
			ELSE
				스위치 = 0
			ENDIF
			IF NX + 3 > MIN_X && ABS(NX - BX) > 5
				IF R_MAP:NY:(NX + 2) == 0 && R_MAP:NY:(NX + 3) == 0 
					스위치 = 0
				ENDIF
			ENDIF
		ELSEIF NX == BX

		ELSEIF NX > BX
			IF !INRANGE(NX,MIN_X,MAX_X) || NX <= MIN_X || NX >= MAX_X
				스위치 = 0
			ENDIF
			IF NX != BX
				NX--
				ROAD += "LEFT/"
				LOCAL:1++
			ELSE
				스위치 = 0
			ENDIF
			IF NX - 3 > MIN_X && ABS(NX - BX) > 5
				IF R_MAP:NY:(NX - 2) == 0 && R_MAP:NY:(NX - 3) == 0 
					스위치 = 0
				ENDIF
			ENDIF
		ENDIF
	ENDIF
	SIF RAND:10 == 0
		스위치 = !스위치
	IF NX == BX && NY == BY
		BREAK
	ENDIF
NEXT

RESULTS '= ROAD
RETURN LOCAL:1